<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>阿焦的博客</title>
  
  <subtitle>一名拥抱AI的GISer</subtitle>
  <link href="/node_modules/hexo-generator-feed/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-09-30T06:01:10.524Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>JiaoXN</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>地理空间的坐标系统和投影</title>
    <link href="http://yoursite.com/2017-10-03-coordinate-system-and-projection/"/>
    <id>http://yoursite.com/2017-10-03-coordinate-system-and-projection/</id>
    <published>2018-10-03T01:57:15.000Z</published>
    <updated>2018-09-30T06:01:10.524Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-相关概念"><a href="#1-相关概念" class="headerlink" title="1 相关概念"></a>1 相关概念</h2><ul><li><p>大地水准面：当海水处于完全静止的平衡状态时，从海平面延伸到所有大陆下部，而与地球重力方向处处处于正交的一个连续、闭合的水准面，该水准面则成为大地水准面。</p></li><li><p>大地体：大地水准面包围的水准椭球称为大地体。</p></li><li><p>地球椭球：也称地球椭球体，是用来描述地球形状的数学表示，通常选择一个旋转的椭球。</p></li><li><p>参考椭球：具有一定几何参数（形状、大小和定位、方向）的地球椭球。</p></li></ul><h2 id="2-地球椭球"><a href="#2-地球椭球" class="headerlink" title="2 地球椭球"></a>2 地球椭球</h2><p>　　地球椭球的确定涉及非常复杂的大地测量学的内容，在经典的大地测量学中，研究地球形状基本上采样几何方法，提供的是几何参数（长半径 \(a\)、短半径 \(b\) 和扁率 \(\alpha\)）。目前常用的地球椭球及其参数如下表所示：</p><table><thead><tr><th style="text-align:center">椭球名称</th><th style="text-align:center">创立年代</th><th style="text-align:center">长半径 \(a/m\)</th><th style="text-align:center">短半径 \(b/m\)</th><th style="text-align:center">扁率 \(\alpha\)</th></tr></thead><tbody><tr><td style="text-align:center">WGS-84</td><td style="text-align:center">1984</td><td style="text-align:center">6 738 137</td><td style="text-align:center">6 356 752</td><td style="text-align:center">1:298.26</td></tr><tr><td style="text-align:center">1975 年国际椭球 <br> （中国1980西安坐标系采用）</td><td style="text-align:center">1975</td><td style="text-align:center">6 378 140</td><td style="text-align:center">6 356 755</td><td style="text-align:center">1:298.257</td></tr><tr><td style="text-align:center">海福特 <br> （中国1953年以前采样）</td><td style="text-align:center">1910</td><td style="text-align:center">6 378 388</td><td style="text-align:center">6 356 912</td><td style="text-align:center">1:297</td></tr><tr><td style="text-align:center">克拉索夫斯基 <br> (中国北京54坐标系采用)</td><td style="text-align:center">1940</td><td style="text-align:center">6 378 245</td><td style="text-align:center">6 356 863</td><td style="text-align:center">1:298.3</td></tr></tbody></table><p><br>　　有了参考椭球后，在实际建立地理空间坐标系统的时候，还需要指定一个大地基准面将这个椭球体与大地体联系起来，在大地测量中称之为<b>椭球定位</b>。这里所谓的定位，就是依据一定的条件，将具有给定参数的椭球体与大地体的相关位置确定下来。强调局部地区大地水准面与椭球面较好的定位称为<b>参考定位</b>，如我国的1980西安坐标系；强调全球范围大地水准面与椭球面较好的定位称为<b>绝对定位</b>，如WGS-84坐标系。</p><h2 id="3-坐标系统"><a href="#3-坐标系统" class="headerlink" title="3 坐标系统"></a>3 坐标系统</h2><p>　　地理空间坐标系统提供了确定空间位置的参照基准，一般情况下，根据表达方式的不同，通常可以分为球面坐标系统和平面坐标系统（也通常称为投影坐标系统）。</p><p>　　地理空间坐标的建立必须依托一定的地球表面几何模型。如果是平面坐标系统，还必须指定地面点位的地理坐标（B, L）与地图上相对应的平面直角坐标（X, Y）之间一一对应的函数关系。换句话说，每一个地理空间坐标系统都有一组与之对应的基本参数。</p><p>　　对于球面坐标系统，主要包括一个地球椭球体和一个大地基准面。大地基准面规定了地球椭球体和大地体的位置关系。</p><p>　　平面坐标系统是按照球面坐标系统与平面坐标之间的映射关系，把球面转绘到平面。因此，一个平面坐标系统，除了包含与之对应的球面坐标系统的相关参数外，还必须指定一个投影规则，即球面坐标与平面坐标之间的映射关系。</p><h3 id="3-1-球面坐标系统的建立"><a href="#3-1-球面坐标系统的建立" class="headerlink" title="3.1 球面坐标系统的建立"></a>3.1 球面坐标系统的建立</h3><p>　　在经典的大地测量中，常用地理坐标和空间直角坐标的概念描述地面点的位置。根据建立的坐标系统采用的椭球的不同，地理坐标又分为天文地理坐标系和大地地理坐标系。前者是以大地体为依据，后者是以地球椭球为依据。空间直角坐标系分为参心空间直角坐标系和地心地固直角坐标系，前者以参考椭球的中心为坐标原点，后者以地球质心为坐标原点。</p><ul><li>天文地理坐标系</li></ul><p>　　天文地理坐标系以地心为坐标原点，Z轴与地球平自转轴重合，ZOX是天文首子午面，以格林尼治平均天文台定义。OY轴与OX、OX轴组成右手坐标系，XOY为地球平均赤道面。</p><p>　　天文纬度为测站垂线方向与地球平均赤道面的夹角，常以φ来表示，赤道面以北为正，以南为负。天文经度为首天文子午面与测站天文子午面的夹角，常以λ表示，首子午面以东为正，以西为负。</p><ul><li>大地地理坐标第</li></ul><p>　　大地地理坐标系是依托地球椭球定义原点和轴系以及相应基本参考面标示较大地域地理空间位置的参考系。大地地理坐标也简称地理坐标。</p><ul><li>参心空间直角坐标系</li></ul><p>　　参心空间直角坐标系是参考椭球上建立的三维直角坐标系O-XYZ。坐标的<br>原点位于椭球的中心，Z轴与椭球的短半轴重合，X轴位于起始大地子午面与赤道面的交线上，Y轴与XZ平面正交，O-XYZ构成右手坐标系。在建立参心坐标时，由于观测范围的限制，不同的国家或地区要求所确定的参考椭球面与局部大地水准面最密合。</p><ul><li>地心地固空间直角坐标系</li></ul><p>　　地心地固直角坐标系原点O与地球质心重合，Z轴指向地球北极，X轴指向格林尼治平均子午面与地球赤道的交点，Y轴垂直于XOZ平面构成右手坐标系。地球自转轴相对于地球体的位置不是固定的，地级点在地球表面上的位置是随时间变化的。因此，在具体建立时，根据选取的实际地级的不同，地心地固空间直角坐标系的实际定义也不同。</p><h3 id="3-2-平面坐标系的建立"><a href="#3-2-平面坐标系的建立" class="headerlink" title="3.2 平面坐标系的建立"></a>3.2 平面坐标系的建立</h3><ul><li>高斯平面直角坐标系</li></ul><p>　　高斯平面直角坐标系是在高斯-克吕格投影带内建立的，具体构成是：规定以中央经线为X轴，以赤道为Y轴，中央经线和赤道的交点为坐标原点；X轴位于北半球为正，南半球为负；Y轴位于东半球为正，西半球为负。在计算中，为了避免Y轴出现负值，规定各投影带的Y轴向西移动500KM，也就是说中央经线在Y轴的值有0编程500KM。</p><p>　　因为每个高斯-克吕格投影的投影带都有一个独立的高斯平面直角坐标系，会出现两个投影带具有相同的高斯平面直角坐标。为了避免这个问题，高斯平面直角坐标规定在横轴Y值前标以投影带号，如y=19 738 765.2 m，表示该坐标位于19带中。</p><p>　　在实际应用中，一般获取的是通用坐标，要获得实际坐标需要先去掉该点纵坐标的分带编号，然后将纵坐标东移500KM，恢复其本来的坐标。</p><ul><li>地方独立的平面直角坐标系</li></ul><p>　　为了减小变形和满足不同区域的生产需求，常常需要建立适合本地区的地方独立坐标系。建立地方独立坐标系，实际上就是通过一些元素的确定来决定地方参考椭球和投影面。地方参考椭球一般选择与当地平均高程相对应的参考椭球，该椭球的中心、轴向和扁率与国家参考椭球相同，其椭球半径\(a\)增大为：</p><p><center>$$ a_{1} = a + \Delta a_{1} $$</center> </p><p><center>$$ \Delta a_{1} = H_{m} + \zeta_{0} $$</center><br>公式中：\( H_{m} \) 表示当地平均海拔高程， \( \zeta_{0} \)表示该地区的平均高程异常。</p><p>　　在地方投影面的确定过程中，应当选取过测区中心的经线或者某个起算点的经线作为独立的中央子午线；以某个特定使用的点或方位作为地方独立坐标系的起算原点和方位，并选取当地的平均高程面\( H_{m} \)作为投影面。</p><h2 id="3-3-高程基准"><a href="#3-3-高程基准" class="headerlink" title="3.3 高程基准"></a>3.3 高程基准</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;1-相关概念&quot;&gt;&lt;a href=&quot;#1-相关概念&quot; class=&quot;headerlink&quot; title=&quot;1 相关概念&quot;&gt;&lt;/a&gt;1 相关概念&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;大地水准面：当海水处于完全静止的平衡状态时，从海平面延伸到所有大陆下部，而与地球重力方向处
      
    
    </summary>
    
      <category term="ESRI" scheme="http://yoursite.com/categories/ESRI/"/>
    
    
      <category term="GIS" scheme="http://yoursite.com/tags/GIS/"/>
    
  </entry>
  
  <entry>
    <title>Portal迁移（以部署UrbanIOC为例）</title>
    <link href="http://yoursite.com/Portal%E8%BF%81%E7%A7%BB%EF%BC%88%E4%BB%A5%E9%83%A8%E7%BD%B2UrbanIOC%E4%B8%BA%E4%BE%8B%EF%BC%89/"/>
    <id>http://yoursite.com/Portal迁移（以部署UrbanIOC为例）/</id>
    <published>2018-05-23T01:57:15.000Z</published>
    <updated>2018-05-23T03:22:15.260Z</updated>
    
    <content type="html"><![CDATA[<p>背景环境如下：</p><p>1、已在虚拟机A上安装好Portal、Server、WebAdaptor和DataStore并且将UrbanIOC项目部署到该虚拟机上；</p><p>2、虚拟机A1的计算机全名为example1.esri.com，IP地址为192.168.1.1（只是举例，并不是真正的计算机全名和IP地址）；</p><p>3、申请了一个域名（比如escri.tech，此处需要注意的是申请的域名不能有下划线，否则Portal安装不成功），现需要使用此域名访问UrbanIOC。</p><p>为了解决这种问题，可能大家首先想到的是创建一个计算机全名为esri.tech的虚拟机B，然后安装Portal、Server、WebAdaptor和DataSotre，然后重新部署UrbanIOC。这种方法肯定可以解决这中问题，但是非常耗时间，包括重装软件的时间、项目数据发布的时间（该项目需要发布一个较大的三维场景，数据发布时间挺长的）。在这里给介绍一种新的解决方法：<strong>在虚拟机B上只安装WebAdaptor，然后为虚拟机B上的Portal和Server重新配置WebAdaptor的，最后修改Portal和Server的托管关系</strong>。</p><ul><li>1、新建虚拟机B，并修改其计算机名为esri、DNS为tech，修改完成后，通过查看系统属性，可确认计算机全名为esri.tech。</li></ul><p><img src="http://ows59ec4r.bkt.clouddn.com/%E5%9B%BE%E7%89%87/2018-05-23/1%E3%80%81Portal%E8%BF%81%E7%A7%BB%EF%BC%88%E4%BB%A5%E9%83%A8%E7%BD%B2UrbanIOC%E4%B8%BA%E4%BE%8B%EF%BC%89%E6%9F%A5%E7%9C%8B%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%85%A8%E5%90%8D.png" alt="image"></p><ul><li><p>2、配置虚拟机B的hosts文件（C:\Windows\System32\drivers\etc），添加内容“192.168.1.1 example1.esri.com”，192.168.1.1为虚拟机A的IP地址，example1.esri.com为虚拟机A的计算机全名。这样就可以在虚拟机B中使用虚拟机A的域名访问Portal。</p></li><li><p>3、在虚拟机B上安装WebAdaptor。这里使用JAVA版的WebAdaptor，<a href="http://enterprise.arcgis.com/zh-cn/web-adaptor/latest/install/java-windows/welcome-arcgis-web-adaptor-install-guide.htm" target="_blank" rel="noopener">安装教程可参考ESRI官网</a>。</p></li><li><p>4、在虚拟机A中解除Portal的WebApdator配置。通过地址（<a href="https://example1.esri.com/portal）访问Portal的管理员页面，依次点击**System*" target="_blank" rel="noopener">https://example1.esri.com/portal）访问Portal的管理员页面，依次点击**System*</a>* 、<strong>WebAdaptor</strong> ，查看Portal配置的WebAdaptor。然后再依次点击<strong>对应的WebAdaptor名称</strong> (例如：example1.esri.com)、<strong>Unregister Web Adaptor</strong>。</p></li></ul><p><img src="http://ows59ec4r.bkt.clouddn.com/%E5%9B%BE%E7%89%87/2018-05-23/1%E3%80%81Portal%E8%BF%81%E7%A7%BB%EF%BC%88%E4%BB%A5%E9%83%A8%E7%BD%B2UrbanIOC%E4%B8%BA%E4%BE%8B%EF%BC%89Portal%E7%AE%A1%E7%90%86%E5%91%98%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2-System.png" alt="image"></p><p><img src="http://ows59ec4r.bkt.clouddn.com/%E5%9B%BE%E7%89%87/2018-05-23/1%E3%80%81Portal%E8%BF%81%E7%A7%BB%EF%BC%88%E4%BB%A5%E9%83%A8%E7%BD%B2UrbanIOC%E4%B8%BA%E4%BE%8B%EF%BC%89Portal%E7%AE%A1%E7%90%86%E5%91%98%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2-WebAdaptor.png" alt="image"></p><p><img src="http://ows59ec4r.bkt.clouddn.com/%E5%9B%BE%E7%89%87/2018-05-23/1%E3%80%81Portal%E8%BF%81%E7%A7%BB%EF%BC%88%E4%BB%A5%E9%83%A8%E7%BD%B2UrbanIOC%E4%B8%BA%E4%BE%8B%EF%BC%89Portal%E7%AE%A1%E7%90%86%E5%91%98%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2-%E9%85%8D%E7%BD%AE%E7%9A%84WebApator.png" alt="image"></p><p><img src="http://ows59ec4r.bkt.clouddn.com/%E5%9B%BE%E7%89%87/2018-05-23/1%E3%80%81Portal%E8%BF%81%E7%A7%BB%EF%BC%88%E4%BB%A5%E9%83%A8%E7%BD%B2UrbanIOC%E4%B8%BA%E4%BE%8B%EF%BC%89Portal%E7%AE%A1%E7%90%86%E5%91%98%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2-%E5%8F%8D%E6%B3%A8%E5%86%8CWebAdaptor.png" alt="image"></p><ul><li><p>5、在虚拟机A中解除Server的WebAdaptor配置。通过地址（<a href="https://exampl1.esri.com:6443/arcgis/manager）访问Server的管理员页面，依次点击**站点*" target="_blank" rel="noopener">https://exampl1.esri.com:6443/arcgis/manager）访问Server的管理员页面，依次点击**站点*</a>* 、<strong>Web Adaptor</strong> ，然后点击取消注册按钮<strong>×</strong> ，在弹出的确定窗口点击<strong>是</strong> , 取消Server的WebAdaptor注册。</p></li><li><p>6、在虚拟机B中按照官网教程在WebAdaotor分别注册Portal和Server。这里需要注意的是，此时的<strong>WebAdator地址是虚拟机B的WebAdator地址</strong>（例如：<a href="https://esri.tech/arcgis/webadaptor），而**Portal和Server地址是虚拟机A中的Portal和Server地址**（例如：Portal的地址为https://exampl1.esri.com:7443，Server的地址为https://example1.esri.com:6443）。" target="_blank" rel="noopener">https://esri.tech/arcgis/webadaptor），而**Portal和Server地址是虚拟机A中的Portal和Server地址**（例如：Portal的地址为https://exampl1.esri.com:7443，Server的地址为https://example1.esri.com:6443）。</a></p></li><li><p>7、修改Portal与Server的托管关系。在虚拟机B中访问页面Portal，依次点击<strong>Orgnaization</strong> 、 <strong>Servers</strong> 、 <strong>ADD SERVER</strong> ，然后在弹出的页面中，Services URL对应值为”<a href="https://esri.tech/arcgis/manager&quot;，Administration" target="_blank" rel="noopener">https://esri.tech/arcgis/manager&quot;，Administration</a> URL对应值为”<a href="https://esri.tech/arcgis/manager&quot;，Username和Password分别为Server的管理员账户和密码。" target="_blank" rel="noopener">https://esri.tech/arcgis/manager&quot;，Username和Password分别为Server的管理员账户和密码。</a></p></li></ul><p><img src="http://ows59ec4r.bkt.clouddn.com/%E5%9B%BE%E7%89%87/2018-05-23/1%E3%80%81Portal%E8%BF%81%E7%A7%BB%EF%BC%88%E4%BB%A5%E9%83%A8%E7%BD%B2UrbanIOC%E4%B8%BA%E4%BE%8B%EF%BC%89/%E9%85%8D%E7%BD%AEPortal%E5%92%8CServer%E7%9A%84%E6%89%98%E7%AE%A1.png" alt="image"></p><ul><li>8、最后修改UrbaIOC的配置文件，然后将其部署到虚拟机B中tomacat中。</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;背景环境如下：&lt;/p&gt;
&lt;p&gt;1、已在虚拟机A上安装好Portal、Server、WebAdaptor和DataStore并且将UrbanIOC项目部署到该虚拟机上；&lt;/p&gt;
&lt;p&gt;2、虚拟机A1的计算机全名为example1.esri.com，IP地址为192.168.1
      
    
    </summary>
    
      <category term="ESRI" scheme="http://yoursite.com/categories/ESRI/"/>
    
    
      <category term="Portal" scheme="http://yoursite.com/tags/Portal/"/>
    
  </entry>
  
</feed>
